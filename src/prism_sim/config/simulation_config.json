{
  "simulation_parameters": {
    "global_constants": {
      "epsilon": 0.001,
      "weeks_per_year": 52,
      "random_seed": 42
    },
    "calibration": {
      "industry_benchmarks": {
        "target_turns": 6.0,
        "target_service_level": 0.97,
        "target_oee_range": [
          0.55,
          0.7
        ],
        "target_slob_max": 0.15,
        "reference_companies": {
          "colgate": {
            "turns": 4.1,
            "dos": 89
          },
          "pg": {
            "turns": 5.5,
            "dos": 66
          },
          "unilever": {
            "turns": 6.2,
            "dos": 59
          }
        }
      },
      "service_level_z_scores": {
        "A": 2.33,
        "B": 2.0,
        "C": 1.65
      },
      "demand_variability_cv": {
        "store": 0.5,
        "customer_dc": 0.3,
        "rdc": 0.2
      },
      "supply_variability_cv": {
        "store": 0.3,
        "customer_dc": 0.2,
        "rdc": 0.15
      },
      "strategic_buffers": {
        "presentation_stock_days": 3.0,
        "forward_positioning_days": 5.0,
        "production_smoothing_days": 5.0
      },
      "trigger_components": {
        "production_lead_time_days": 3,
        "transit_time_days": 3,
        "safety_buffer_a": 10,
        "safety_buffer_b": 6,
        "safety_buffer_c": 3,
        "review_period_a": 5,
        "review_period_b": 5,
        "review_period_c": 3
      },
      "multi_echelon_lead_times": {
        "_comment": "v0.33.0: Cumulative lead times by echelon (days) - accounts for multi-tier cascade",
        "store_from_dc": 1.0,
        "customer_dc_from_rdc": 3.0,
        "rdc_from_plant": 5.0,
        "plant_production": 3.0,
        "ftl_consolidation_buffer": 2.0,
        "use_dynamic_calculation": true
      },
      "mrp_signal_lag": {
        "_comment": "v0.33.0: MRP uses rolling windows that create signal lag",
        "demand_history_days": 14,
        "effective_lag_days": 7,
        "include_in_triggers": true
      },
      "cold_start": {
        "_comment": "v0.33.0: Parameters to compensate for cold-start artifacts",
        "buffer_pct": 0.15,
        "stabilization_days": 30,
        "apply_to_priming": true
      },
      "baseline_reference": {
        "_comment": "v0.32.1 empirically-tuned values for validation",
        "store_days_supply": 14.0,
        "rdc_days_supply": 21.0,
        "customer_dc_days_supply": 10.0,
        "abc_velocity_factors": {
          "A": 1.2,
          "B": 1.0,
          "C": 0.8
        },
        "trigger_dos_a": 12,
        "trigger_dos_b": 9,
        "trigger_dos_c": 6
      },
      "abc_production_factors": {
        "_comment": "v0.42.0: A-buffer raised to 1.22 — with Phase 4 ABC-aware clipping, higher buffer is safe",
        "a_buffer": 1.22,
        "b_buffer": 1.1,
        "c_production_factor": 1.0,
        "_c_note": "C-items no longer penalized - use longer horizon instead"
      },
      "echelon_proportions": {
        "store": 0.3,
        "customer_dc": 0.22,
        "rdc": 0.28,
        "plant": 0.12,
        "pipeline": 0.08
      },
      "warm_start": {
        "_comment": "v0.33.0: Configuration for warm-start snapshot system",
        "enabled": false,
        "snapshot_path": null,
        "default_burn_in_days": 10,
        "_burn_in_note": "v0.49.0: Reduced from 90 to 10 — synthetic steady-state priming handles first 80 days",
        "synthetic_steady_state": true,
        "_synthetic_note": "v0.49.0: Pre-fills pipeline, WIP, history buffers, and inventory age at day 0",
        "validate_config_hash": true,
        "history_buffer_init": {
          "_comment": "How to initialize history buffers from derived params",
          "demand_noise_cv": 0.1,
          "lead_time_noise_cv": 0.1,
          "use_derived_abc": true
        }
      },
      "capacity_planning": {
        "_comment": "Parameters for --derive-lines capacity planning (v0.36.3)",
        "min_lines_per_plant": 2,
        "max_oee_target": 0.85,
        "demand_realism_factor": 0.41,
        "_demand_factor_note": "Accounts for segment weights (0.5 default), Zipf distribution, and format scaling. Measured: actual/calibrated = 22M/54M = 0.41",
        "variability_safety_z": 1.28,
        "_variability_note": "z=1.28 (90%), z=1.65 (95%), z=2.0 (97.5%). Used for capacity buffer against demand peaks."
      }
    },
    "scoring": {
      "service_index_base": 100.0,
      "backlog_penalty_divisor": 100000.0,
      "truck_fill_scale": 100.0,
      "oee_scale": 100.0
    },
    "calendar": {
      "weeks_per_year": 52
    },
    "agents": {
      "abc_prioritization": {
        "enabled": true,
        "a_threshold_pct": 0.8,
        "b_threshold_pct": 0.95,
        "a_rop_multiplier": 1.25,
        "b_rop_multiplier": 1.0,
        "c_rop_multiplier": 0.5,
        "a_allocation_priority": 1,
        "b_allocation_priority": 2,
        "c_allocation_priority": 3
      },
      "replenishment": {
        "target_days_supply": 6.0,
        "reorder_point_days": 3.0,
        "min_order_qty": 100.0,
        "batch_size_cases": 100.0,
        "backlog_penalty_factor": 2.0,
        "min_demand_floor": 0.1,
        "default_min_qty": 100.0,
        "lead_time_days": 3.0,
        "service_level_z": 1.65,
        "min_safety_stock_days": 3.0,
        "variance_lookback_days": 28,
        "order_cycle_days": 1,
        "store_batch_size_cases": 10.0,
        "lead_time_history_len": 20,
        "min_history_days": 7,
        "emergency_dos_threshold": 3.0,
        "_emergency_note": "v0.42.0: Raised from 2.0 to 3.0 — gives stores 1-day earlier warning for A-items with 1-day lead times",
        "segmentation": {
          "_comment": "v0.39.5: C-items raised from 1.0 to 1.65 (95% service target) to prevent starvation",
          "A": 2.33,
          "B": 1.65,
          "C": 1.65
        },
        "dc_dos_cap_a": 10,
        "dc_dos_cap_b": 14,
        "dc_dos_cap_c": 18,
        "_dc_dos_cap_note": "v0.51.0: Tightened from 15/20/25 — suppression at ~1x target DOS with floor gating",
        "unmet_demand_weight": 0.5,
        "unmet_demand_decay": 0.93,
        "_unmet_demand_note": "v0.48.0: Raised from 0.85 to 0.93 — half-life 9.6d matches 10d supply chain response time",
        "order_cap_base_demand_multiplier": 3.0,
        "_order_cap_note": "v0.50.0 Fix 1: Anchors order cap to exogenous POS demand, not endogenous inflow",
        "dc_buffer_days": 7.0,
        "_dc_buffer_note": "v0.52.0: Local buffer target in days of outflow. Tuned from 10 to 7 to reduce DC accumulation and improve turns",
        "dc_correction_days": 7.0,
        "_dc_correction_note": "v0.52.0: Days over which to smooth inventory correction toward local target",
        "dc_correction_cap_pct": 0.5,
        "_dc_correction_cap_note": "v0.52.0: Max correction as fraction of outflow (prevents overshoot)",
        "throughput_floor_pct": 0.7,
        "_throughput_floor_note": "v0.52.0: Floor outflow at 70% of expected throughput for demand ramp protection",
        "floor_gating_enabled": true,
        "_floor_gating_note": "v0.51.0: Anti-windup — demand floor scales with inventory deficit, disengages when DOS >= target",
        "outflow_history_days": 5,
        "_outflow_history_note": "v0.51.0: Reduced from 7 to 5 — shorter window passes weekly variance, enables bullwhip emergence",
        "push_allocation_enabled": true,
        "push_threshold_dos": 30.0,
        "plant_push_floor_dos": 20.0,
        "_plant_push_floor_note": "v0.52.0: Below this DOS, plant pushes full qty to plant-direct DCs. Tuned from 40 to 20",
        "plant_push_cap_dos": 60.0,
        "_plant_push_cap_note": "v0.52.0: Above this DOS, plant push fully gated (redirected to RDCs). Tuned from 120 to 60",
        "push_receive_dos_cap": 12.0,
        "_push_receive_note": "v0.52.0: Lowered from 15 to 12 — aligns with dc_buffer_days=7 + 5d margin",
        "channel_profiles": {
          "MASS_RETAIL": {
            "target_days": 6.0,
            "reorder_point_days": 3.0,
            "batch_size": 50.0,
            "smoothing_factor": 0.3
          },
          "GROCERY": {
            "target_days": 8.0,
            "reorder_point_days": 4.0,
            "batch_size": 50.0,
            "smoothing_factor": 0.3
          },
          "CLUB": {
            "target_days": 6.0,
            "reorder_point_days": 3.0,
            "batch_size": 50.0,
            "smoothing_factor": 0.2
          },
          "PHARMACY": {
            "target_days": 8.0,
            "reorder_point_days": 4.0,
            "batch_size": 100.0,
            "smoothing_factor": 0.2
          },
          "DISTRIBUTOR": {
            "target_days": 10.0,
            "reorder_point_days": 5.0,
            "batch_size": 25.0,
            "smoothing_factor": 0.3
          },
          "ECOMMERCE": {
            "target_days": 6.0,
            "reorder_point_days": 3.0,
            "batch_size": 50.0,
            "smoothing_factor": 0.4
          },
          "DTC": {
            "target_days": 5.0,
            "reorder_point_days": 2.0,
            "batch_size": 25.0,
            "smoothing_factor": 0.5
          },
          "default": {
            "target_days": 6.0,
            "reorder_point_days": 3.0,
            "batch_size": 100.0,
            "smoothing_factor": 0.2
          }
        }
      }
    },
    "demand": {
      "_sku_alpha_note": "v0.39.4: Aligned with benchmark_manifest (1.05) for proper Pareto 80/20 distribution",
      "sku_popularity_alpha": 1.05,
      "seasonality": {
        "amplitude": 0.12,
        "capacity_amplitude": 0.108,
        "phase_shift_days": 150,
        "cycle_days": 365
      },
      "noise": {
        "gamma_shape": 10.0,
        "gamma_scale": 0.1
      },
      "category_profiles": {
        "ORAL_CARE": {
          "base_daily_demand": 8.0,
          "sku_proportion": 0.45
        },
        "PERSONAL_WASH": {
          "base_daily_demand": 5.5,
          "sku_proportion": 0.30
        },
        "HOME_CARE": {
          "base_daily_demand": 2.0,
          "sku_proportion": 0.25
        },
        "INGREDIENT": {
          "base_daily_demand": 0.0
        }
      },
      "format_scale_factors": {
        "SUPERMARKET": 1.0,
        "HYPERMARKET": 1.0,
        "CONVENIENCE": 0.5,
        "CLUB": 15.0,
        "ECOM_FC": 50.0,
        "DTC_FC": 50.0,
        "PHARMACY": 0.8
      },
      "channel_value_segment_mix": {
        "MASS_RETAIL": {
          "VALUE": 0.3,
          "MAINSTREAM": 0.5,
          "PREMIUM": 0.15,
          "TRIAL": 0.05
        },
        "GROCERY": {
          "VALUE": 0.35,
          "MAINSTREAM": 0.45,
          "PREMIUM": 0.15,
          "TRIAL": 0.05
        },
        "CLUB": {
          "VALUE": 0.7,
          "MAINSTREAM": 0.25,
          "PREMIUM": 0.05,
          "TRIAL": 0.0
        },
        "PHARMACY": {
          "VALUE": 0.15,
          "MAINSTREAM": 0.45,
          "PREMIUM": 0.3,
          "TRIAL": 0.1
        },
        "DISTRIBUTOR": {
          "VALUE": 0.3,
          "MAINSTREAM": 0.5,
          "PREMIUM": 0.15,
          "TRIAL": 0.05
        },
        "ECOMMERCE": {
          "MAINSTREAM": 0.4,
          "PREMIUM": 0.3,
          "VALUE": 0.2,
          "TRIAL": 0.1
        },
        "DTC": {
          "PREMIUM": 0.5,
          "MAINSTREAM": 0.3,
          "TRIAL": 0.2,
          "VALUE": 0.0
        },
        "default": {
          "VALUE": 0.3,
          "MAINSTREAM": 0.5,
          "PREMIUM": 0.15,
          "TRIAL": 0.05
        }
      }
    },
    "inventory": {
      "initial_fg_level": 5.0,
      "initialization": {
        "_comment": "v0.47.0: DC days reduced from 14 to 10 — less initialization overshoot",
        "store_days_supply": 10.0,
        "rdc_days_supply": 21.0,
        "rdc_store_multiplier": 80.0,
        "customer_dc_days_supply": 10.0,
        "plant_ingredient_buffer": 200000.0,
        "abc_velocity_factors": {
          "A": 1.2,
          "B": 1.0,
          "C": 0.8
        }
      }
    },
    "logistics": {
      "constraints": {
        "truck_max_weight_kg": 20000.0,
        "truck_max_volume_m3": 60.0,
        "epsilon_weight_kg": 0.001,
        "epsilon_volume_m3": 0.0001
      },
      "default_lead_time_days": 3.0,
      "channel_rules": {
        "MASS_RETAIL": {
          "mode": "FTL",
          "min_order_pallets": 20,
          "target_fill_rate": 0.9
        },
        "GROCERY": {
          "mode": "FTL",
          "min_order_pallets": 15,
          "target_fill_rate": 0.9
        },
        "CLUB": {
          "mode": "FTL",
          "min_order_pallets": 15,
          "target_fill_rate": 0.85
        },
        "PHARMACY": {
          "mode": "FTL",
          "min_order_pallets": 5,
          "target_fill_rate": 0.8
        },
        "DISTRIBUTOR": {
          "mode": "FTL",
          "min_order_pallets": 10,
          "target_fill_rate": 0.8
        },
        "ECOMMERCE": {
          "mode": "FTL",
          "min_order_pallets": 5,
          "target_fill_rate": 0.75
        }
      },
      "store_delivery_mode": "LTL",
      "ltl_min_cases": 100,
      "default_ftl_min_pallets": 10,
      "co2_emission_factor_kg_per_ton_km": 0.1,
      "stale_order_threshold_days": 14
    },
    "manufacturing": {
      "target_days_supply": 14.0,
      "reorder_point_days": 10.0,
      "mrp_thresholds": {
        "demand_signal_collapse_pct": 0.4,
        "velocity_trend_threshold_pct": 0.6,
        "production_floor_pct": 0.5,
        "min_production_cap_pct": 0.7,
        "rate_based_production": true,
        "rate_based_min_batch": 100.0,
        "inventory_cap_dos_a": 25,
        "inventory_cap_dos_b": 35,
        "inventory_cap_dos_c": 45,
        "diagnostics_enabled": true,
        "abc_production_enabled": true,
        "a_capacity_share": 0.65,
        "a_production_buffer": 1.22,
        "b_production_buffer": 1.1,
        "c_production_factor": 1.0,
        "demand_floor_weight": 0.50,
        "_demand_floor_note": "v0.51.0: 50% expected + 50% actual — equal weight lets actual demand drive production, reduces B/C overproduction",
        "seasonal_floor_min_pct": 0.85,
        "_seasonal_floor_note": "v0.46.0: During troughs, demand floor tracks seasonality but never below 85% of expected",
        "slob_dampening_factor": 0.25,
        "_slob_dampening_note": "v0.47.0: Reduce batch size by 75% when product inventory age exceeds SLOB threshold (was 50%)",
        "campaign_batching": {
          "enabled": true,
          "production_horizon_days": 14,
          "production_horizon_days_a": 14,
          "production_horizon_days_b": 14,
          "production_horizon_days_c": 14,
          "_c_horizon_note": "v0.51.0: Equalized to 14d — DRP (v0.48.0) handles batch sizing, 21d inflated C batches",
          "_trigger_note": "v0.48.0: B/C triggers raised for more frequent, smaller batches (DRP supplement)",
          "trigger_dos_a": 7,
          "trigger_dos_b": 7,
          "trigger_dos_c": 6,
          "_sku_slot_note": "v0.43.0: Increased from 80 to 100 — with 60/25/15 ABC slot split, gives ~1.3d A-item rotation",
          "max_skus_per_plant_per_day": 100,
          "a_slot_pct": 0.60,
          "b_slot_pct": 0.25,
          "c_slot_pct": 0.15
        },
        "po_consolidation": {
          "enabled": true,
          "window_days": 2,
          "min_weight_kg": 1500,
          "critical_dos_threshold": 5
        }
      },
      "inventory_policies": {
        "DEFAULT": {
          "reorder_point_days": 7.0,
          "target_days_supply": 14.0
        },
        "INGREDIENT": {
          "reorder_point_days": 7.0,
          "target_days_supply": 14.0
        },
        "PACKAGING": {
          "reorder_point_days": 7.0,
          "target_days_supply": 14.0
        },
        "ACTIVE_CHEM": {
          "reorder_point_days": 7.0,
          "target_days_supply": 14.0
        },
        "SPOF": {
          "reorder_point_days": 14.0,
          "target_days_supply": 21.0
        }
      },
      "min_production_qty": 25000.0,
      "min_batch_size_absolute": 1000.0,
      "min_ingredient_moq": 500.0,
      "production_lead_time_days": 3,
      "production_hours_per_day": 24.0,
      "production_rate_multiplier": 1.0,
      "changeover_time_multiplier": 0.1,
      "efficiency_factor": 0.95,
      "unplanned_downtime_pct": 0.05,
      "backup_supplier_cost_premium": 0.25,
      "default_store_count": 100,
      "default_num_lines": 8,
      "plant_parameters": {
        "PLANT-OH": {
          "description": "Legacy plant - serves HOME_CARE and PERSONAL_WASH",
          "efficiency_factor": 0.78,
          "unplanned_downtime_pct": 0.1,
          "num_lines": 4,
          "supported_categories": [
            "HOME_CARE",
            "PERSONAL_WASH"
          ]
        },
        "PLANT-TX": {
          "description": "Modern high-speed ORAL_CARE facility",
          "efficiency_factor": 0.88,
          "unplanned_downtime_pct": 0.04,
          "num_lines": 2,
          "supported_categories": [
            "ORAL_CARE"
          ]
        },
        "PLANT-CA": {
          "description": "Flexible multi-category facility",
          "efficiency_factor": 0.82,
          "unplanned_downtime_pct": 0.06,
          "num_lines": 3,
          "supported_categories": [
            "ORAL_CARE",
            "PERSONAL_WASH"
          ]
        },
        "PLANT-GA": {
          "description": "Standard facility with oral care overflow",
          "efficiency_factor": 0.8,
          "unplanned_downtime_pct": 0.07,
          "num_lines": 6,
          "supported_categories": [
            "PERSONAL_WASH",
            "HOME_CARE",
            "ORAL_CARE"
          ]
        }
      },
      "default_yield_percent": 98.5,
      "production_order_timeout_days": 14,
      "batch_retention_days": 30,
      "recall_batch_trigger_day": 30,
      "recall_scenario": {
        "product_id": "SKU-DET-001",
        "batch_id": "B-2024-RECALL-001",
        "status": "hold",
        "notes": "RECALL: Contaminated sorbitol detected - isolate and quarantine"
      },
      "spof": {
        "ingredient_id": "ACT-CHEM-001",
        "primary_supplier_id": "SUP-001",
        "backup_supplier_id": "SUP-002",
        "warning_threshold": 10.0,
        "description": "Active Agent 1 - Global sourced specialty chemical (SPOF scenario)"
      },
      "initial_plant_inventory": {
        "ACT-CHEM-001": 500000.0,
        "BLK-WATER-001": 200000.0
      }
    },
    "validation": {
      "oee_range": [
        0.65,
        0.85
      ],
      "truck_fill_target": 0.85,
      "slob_max_pct": 0.3,
      "slob_days_threshold": 60.0,
      "slob_abc_thresholds": {
        "_comment": "v0.39.2: Age-based thresholds (days sitting, not DOS)",
        "A": 60.0,
        "B": 90.0,
        "C": 120.0
      },
      "slob_margin": 1.5,
      "slob_abc_velocity_factors": {
        "A": 0.7,
        "B": 1.0,
        "C": 1.5
      },
      "slob_min_demand_velocity": 1.0,
      "seasonal_min_peak_margin": 0.05,
      "seasonal_min_trough_margin": 0.1,
      "seasonal_max_peak_oee": 0.95,
      "seasonal_min_trough_oee": 0.4,
      "seasonal_target_trough_buffer": 0.1,
      "inventory_turns_range": [
        6.0,
        14.0
      ],
      "cost_per_case_range": [
        1.0,
        3.0
      ],
      "mass_balance_drift_max": 0.02,
      "mass_balance_min_threshold": 1.0,
      "min_samples_for_variance": 2,
      "perfect_order_threshold": 0.9,
      "mape_base": 0.3,
      "mape_quirks_penalty": 0.15,
      "scope_3_kg_co2_per_case": 0.25,
      "perfect_order_disruption_penalty": 0.5
    },
    "perfect_order": {
      "damage_rate": 0.02,
      "documentation_error_rate": 0.005,
      "on_time_tolerance_days": 1
    },
    "cash_to_cash": {
      "dso_days": 30.0,
      "dpo_days": 45.0
    },
    "quirks": {
      "port_congestion": {
        "enabled": false,
        "ar_coefficient": 0.7,
        "noise_std_hours": 2.0,
        "cluster_threshold_hours": 4.0,
        "cluster_size": 3,
        "cluster_delay_min_hours": 2.0,
        "cluster_delay_max_hours": 6.0,
        "affected_ports": [
          "USLAX",
          "CNSHA"
        ]
      },
      "optimism_bias": {
        "enabled": false,
        "bias_pct": 0.15,
        "affected_age_months": 6
      },
      "phantom_inventory": {
        "enabled": false,
        "shrinkage_pct": 0.02,
        "detection_lag_days": 14,
        "shrinkage_factor_min": 0.5,
        "shrinkage_factor_max": 1.0
      },
      "bullwhip_whip_crack": {
        "enabled": false,
        "batching_factor": 3.0
      },
      "single_source_fragility": {
        "enabled": false,
        "cascade_delay_multiplier": 2.5
      },
      "data_decay": {
        "enabled": false,
        "base_rejection_rate": 0.02,
        "elevated_rejection_rate": 0.05,
        "days_to_expiry_threshold": 30
      }
    },
    "risk_events": {
      "enabled": false,
      "events": [
        {
          "code": "RSK-BIO-001",
          "type": "contamination",
          "trigger_day": 150,
          "duration_days": 1,
          "parameters": {
            "target_ingredient": "ING-SORB-001",
            "qc_status_override": "rejected"
          }
        },
        {
          "code": "RSK-LOG-002",
          "type": "port_strike",
          "trigger_day": 120,
          "duration_days": 14,
          "parameters": {
            "delay_multiplier": 4.0,
            "delay_distribution": "gamma",
            "gamma_shape": 2.0,
            "affected_ports": [
              "USLAX"
            ]
          }
        },
        {
          "code": "RSK-SUP-003",
          "type": "supplier_opacity",
          "trigger_day": 100,
          "duration_days": 30,
          "parameters": {
            "target_supplier": "SUP-001",
            "degraded_otd_rate": 0.4
          }
        },
        {
          "code": "RSK-CYB-004",
          "type": "cyber_outage",
          "trigger_day": 200,
          "duration_days": 3,
          "parameters": {
            "target_dc": "RDC-MW",
            "delay_multiplier": 10.0
          }
        },
        {
          "code": "RSK-ENV-005",
          "type": "carbon_tax_spike",
          "trigger_day": 180,
          "duration_days": 185,
          "parameters": {
            "co2_cost_multiplier": 3.0
          }
        }
      ]
    },
    "geospatial": {
      "city_data_path": "data/static/us_cities.csv",
      "metropolitan_jitter": 0.05,
      "avg_truck_speed_kmh": 80.0,
      "base_handling_days": 1.0
    },
    "writer": {
      "output_format": "csv",
      "streaming": true,
      "parquet_batch_size": 10000,
      "_sample_rate_note": "v0.39.4: Changed to 7 (weekly) to prevent 8GB+ memory growth",
      "inventory_sample_rate": 7
    }
  }
}
